---
title: "ANOVA Examples"
output:
  github_document:
    preserve_yaml: FALSE
vignette: >
  %\VignetteIndexEntry{ANOVA Examples}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include=FALSE}
knitr::opts_chunk$set(comment = NA)
devtools::source_gist("8e6e5dc401e3fc1042ef7a030f9d19c7", filename = "revised_toc.R")
```

```{r, include=FALSE}
if (!require(backcalc)) {
  if (!require(remotes)) install.packages("remotes")
  remotes::install_github("cwendorf/backcalc")
}
library(backcalc)
```

## ANOVA Examples

The sections below progress from more complete input to less complete input, moving from miminal required inference to maximal inference on the part of the function. Similarly, the structure highlights the flexibility of the function across diverse study designs and input constraints.

```{r toc, echo=FALSE}
thisfile <- knitr::current_input()
revised_toc(thisfile, base_level = 3, toc_depth = 4)
```

---

### Full ANOVA Cases

```{r}
# 1. One-way between-subjects ANOVA (single factor)
backcalc_anova(
  F = 5.2,
  df1 = 2,
  df2 = 30,
  design = "between",
  levels = list(3),      # 3 levels total
  n = 33,
  labels = "Treatment"
)

# 2. Repeated-measures ANOVA (single within factor with sphericity correction)
backcalc_anova(
  F = 4.8,
  df1 = NA, df2 = NA,
  design = "within",
  levels = list(4),
  subjects = 12,
  epsilon = 0.75,
  labels = "Time"
)

# 3. Factorial between-subjects ANOVA (2×3): two main effects + interaction
backcalc_anova(
  F = c(6.4, 3.2, 2.5),
  df1 = NA, df2 = NA,
  design = "between",
  levels = list(c(2, 3), c(2, 3), c(2, 3)),
  n = 36,
  effect = c("main", "main", "interaction"),
  labels = c("FactorA", "FactorB", "A×B")
)

# 4. Mixed design (Between × Within): between main, within main, interaction
backcalc_anova(
  F = c(5.5, 4.2, 1.8),
  df1 = NA, df2 = NA,
  design = c("between", "within", "mixed"),
  levels = list(2, 3, c(2, 3)),
  n = 20,                # total sample size across between groups
  subjects = 10,         # subjects per cell for within factor
  epsilon = c(1, 0.85, 0.85),
  effect = c("main", "main", "interaction"),
  labels = c("Group", "Time", "Group×Time")
)
```

### Minimal Input Cases

```{r}
# 5. Only η²p and df given, reconstruct F and p
backcalc_anova(
  eta2 = 0.15,
  df1 = 2,
  df2 = 30
)

# 6. Only p and dfs given, reconstruct F and η²p
backcalc_anova(
  p = 0.012,
  df1 = 1,
  df2 = 28
)

# 7. Only F and dfs given, calculate p and η²p
backcalc_anova(
  F = 4.5,
  df1 = 1,
  df2 = 22
)
```

### Insufficient Input Cases

```{r}
# 8. Only dfs provided (cannot compute F, p, or effect sizes)
backcalc_anova(
  df1 = 2,
  df2 = 30
)

# 9. Only F provided (missing dfs so p and effect sizes cannot be derived)
backcalc_anova(
  F = 5.2
)

# 10. Only eta2 provided (without dfs cannot derive F or CI)
backcalc_anova(
  eta2 = 0.12
)
```
